<!DOCTYPE html>
<html ng-app="{{ ngapp }}">
    <head>
	{% load static staticfiles %}
        <link rel="icon" type="image/gif/png" href="{% static 'img/wed.png' %}">
		<link href="{% static 'css/bootstrap.css' %}" rel="stylesheet" type="text/css">
		<link href="{% static 'css/custom.css' %}" rel="stylesheet" type="text/css">
		<link href="{% static 'bower_components/angular-ui-grid/ui-grid.min.css' %}" rel="stylesheet" type="text/css">
		<!--<link rel="stylesheet" type="text/css" href="{#% static 'css/animate.css' %#}" />-->
		<!--<link rel="stylesheet" type="text/css" href="{#% static 'plugins/hover-master/css/hover.css' %#}" />-->
		<!--<link rel="stylesheet" type="text/css" href="{#% static 'plugins/hover-master/css/hover-min.css' %#}" />-->
        <!--<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" media="all">-->
    {% block js %}
        <script type="text/javascript" src="{% static 'bower_components/angular/angular.min.js' %}"></script>
        <script type="text/javascript" src="{% static 'bower_components/angular-cookies/angular-cookies.min.js' %}"></script>
        <script type="text/javascript" src="{% static 'bower_components/angular-bootstrap/ui-bootstrap-tpls.min.js' %}"></script>
        <script type="text/javascript" src="{% static 'bower_components/angular-route/angular-route.min.js' %}"></script>
        <script type="text/javascript" src="{% static 'bower_components/angular-ui-grid/ui-grid.min.js' %}"></script>
        <script type="text/javascript" src="{% static 'plugins/tinymce/tinymce.min.js' %}"></script>
        <script type="text/javascript" src="{% static 'bower_components/angular-ui-tinymce/src/tinymce.js' %}"></script>
        <script type="text/javascript" src="{% static 'js/jquery.min.js' %}"></script>
        <script type="text/javascript" src="{% static 'js/myscript.js' %}"></script>

    {% endblock js %}
    	<title>W.E.D {% block title %} {% endblock %}</title>

    {% block additional_styles %}
        <style>
            .custom-margin-top {
                margin: 10% auto 0px auto;
            }
            .custom-padding-5 {
                padding-top: 10px;
            }
            body {
                background-image: url({% static 'img/wall6.jpg'%});
           }
        </style>
    {% endblock %}
    <style>
        .custom-margin-top {
            margin: 10% auto 0px auto;
        }
        .custom-padding-5 {
            padding-top: 10px;
        }
        .myGrid {
            width: 100%;
            height: 250px;
          }
        .row-break {
            margin-top: 25px;
        }
        .side-bar {
            background: #3F454F;
            min-height: 100vh;
            z-index: 200;
        }
        .main-section{
            min-height: 100vh;
            background: #FFF;
        }
        .dark-bg {
            background: #3F454F;
        }
        .side-bar-btn{
            background: #3498DB;
        }
        .light-bg {
            background: #FFF;
            min-height: 100vh;
        }
        .entries-list-container {
            background: rgb(232, 232, 232);
        }


    </style>
    </head>


    <body>

        {% block navbar %}
        <nav class="navbar navbar-inverse navbar-fixed-top ">
          <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
             <a href="#/" class="btn btn-danger navbar-btn"><b>W.E.D</b></a>
            </div>
            <ul class="nav navbar-nav navbar-right">
                {% if user.is_authenticated %}
                    <li><a href="#"> Welcome {{ user }}</a></li>
                    <li><a href="{% url 'logout' %}">Logout <span class="glyphicon glyphicon-off"></span></a></li>
                {% else %}
                    <li>
                        <a href="{% url 'login_register' %}#/" style="color: white">
                            <span class="glyphicon glyphicon-star"></span>&nbsp;&nbsp;Register</a>
                    </li>
                    <li><a href="{% url 'login' %}" style="color: white">
                        <span class="glyphicon glyphicon-log-in"></span>&nbsp;&nbsp;Login</a>
                    </li>
                {% endif %}
             </ul>
          </div><!-- /.container-fluid -->
        </nav>
        {% endblock %}
        {% block subnavbar %}
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-12">
                    <h1>
                    </h1>
                </div>
            </div>
        </div>
        {% endblock %}

        <div class="container-fluid">
        {% block content %}

        {% endblock %}
        </div>

        <script>
            var {{ ngapp }} = angular.module('{{ ngapp }}', ['ngCookies', 'ui.bootstrap', 'ngRoute', 'ui.grid', 'ui.grid.selection', 'ui.tinymce']);

            {{ ngapp }}.config(function($httpProvider){
                {{ ngapp }}.default_post_headers = $httpProvider.defaults.headers.post;
            });

            {{ ngapp }}.run(function run( $http, $cookies ){
                var allCookies = $cookies.getAll();
                if(!allCookies.hasOwnProperty('csrftoken')){
                    var token = "{{ csrf_token }}";
                    console.log(token);
                }
                $http.defaults.headers.common["X-CSRFTOKEN"] = allCookies.csrftoken;
            });


            {{ ngapp }}.directive('ckEditor', [function () {
                  return {
                      require: '?ngModel',
                      restrict: 'C',
                      link: function (scope, elm, attr, model) {
                          var isReady = false;
                          var data = [];
                          config = {
                              'toolbar': 'Custom',
                              'toolbar_Custom': [
                                  ['Bold', 'Italic', 'Underline'],
                                  ['Image', 'NumberedList', 'BulletedList', '-', 'Outdent', 'Indent', '-', 'JustifyLeft', 'JustifyCenter', 'JustifyRight', 'JustifyBlock'],
                                  ['Link', 'Unlink'],
                                  ['RemoveFormat', 'Source'],
                                  ['Font', 'FontSize', 'FontColor', 'TextColor', 'Format', 'CodeSnippet'],
                                  ['Maximize', 'ShowBlocks'],
                                ],
                              'extraPlugins': 'uploadimage,image2,autogrow,codesnippet',
                          };
                          var ck = CKEDITOR.replace(elm[0], config);
                          function setData() {
                              if (!data.length) {
                                  return;
                              }

                              var d = data.splice(0, 1);
                              ck.setData(d[0] || '<span></span>', function () {
                                  setData();
                                  isReady = true;
                              });
                          }

                          ck.on('instanceReady', function (e) {
                              if (model) {
                                  setData();
                              }
                          });

                          elm.bind('$destroy', function () {
                              ck.destroy(false);
                          });

                          if (model) {
                              ck.on('change', function () {
                                  scope.$apply(function () {
                                      var data = ck.getData();
                                      if (data == '<span></span>') {
                                          data = null;
                                      }
                                      model.$setViewValue(data);
                                  });
                              });

                              model.$render = function (value) {
                                  if (model.$viewValue === undefined) {
                                      model.$setViewValue(null);
                                      model.$viewValue = null;
                                  }

                                  data.push(model.$viewValue);

                                  if (isReady) {
                                      isReady = false;
                                      setData();
                                  }
                              };
                          }

                      }
                  };
              }]);


            {% block extrascript %}


            {% endblock %}
        </script>


        {% block footer %}
		<!-- Footer -->
{#        <footer>#}
{#		    <div class="navbar navbar-inverse navbar-fixed-bottom">#}
{#                <div class="navbar-collapse collapse pull-right" id="footer-body">#}
{#                    <ul class="nav navbar-nav">#}
{#                        <li><a href="#">Touch Innovate</a></li>#}
{#                    </ul>#}
{#                </div>#}
{#		    </div>#}
{#		</footer>#}
    {% endblock %}

    </body>
</html>
